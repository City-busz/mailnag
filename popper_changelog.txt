========================================================================
Open Items
========================================================================

0.28
- PPA



Backlog
------------------------------------------------------------------------
- PPA bauen (siehe: http://wiki.ubuntuusers.de/Launchpad/PPA) -> IRC
- Bug 684906: apply XDG standards
- show errors and warnings on the screen (not only in popper.log) (optional)
- Änderungswünsche:
	1. ich hätte gern die Möglichkeit Verbindungen ohne SSL zu verbieten
	2. die Abfragehäufigkeit sollte für jeden Mailaccount separat setzbar sein
- Momentan wird eine vorhandene Logdatei in popper.sh gelöscht.
  Schöner wäre ein 'truncate --size 0', da dadurch ein 'tail -f' weiterlaufen würde.
- Derzeit wird das Logging einfach durch die Umleitung der Standardausgabe vorgenommen.
  Wesentlich schöner wäre der Gebrauch des Moduls logging und die Konfigurationsmöglichkeit
  eines Loglevels. Hierdurch ließen sich insbesondere viele zusätzliche Ausgaben im
  Debug-Level aufnehmen, die derzeit nur stören würden.
- https://bugs.launchpad.net/bugs/712986
  Since most IMAP servers support IDLE protocol, it would be nice to have this support in popper.
  IMAP IDLE is implemented in imaplib2 python module from Piers Lauder who is also the author of the original imaplib
  http://sydney.edu.au/engineering/it/~piers/python/imaplib.html
  There is a very short example at http://blog.timstoop.nl/2009/03/11/python-imap-idle-with-imaplib2/
  I'm willing to try to write a patch as soon as I have time.
- Mijobe:
	DD erscheint nur auf dem virtuellen Desktop, der zufällig bei der ersten eintreffenden Mail aktiv ist.
	Es sollte entweder auf allen virtuellen Desktops zu sehen sein, oder es sollte möglich sein ihm einen zuzuweisen.
	Wenn ich alle Mails gelesen habe, verschwinden sie zudem nicht von sich aus vom Desktop.

	Mehr Kommandos für Menüeinträge:
	- "pause/continue [Kontoname]" um Popper bzw ein Konto aussetzen zu lassen ohne Popper zu stoppen,
	- einen optionalen Parameter "Kontoname" beim "check", "[de]activate blob/sound/desktop/scripts/filter"
		um die einzelnen Funktionalitäten zu [de]aktivieren.

	Durch den Neuaufbau der Kontenmaske ist es relativ leicht geworden, POP/POPS/IMAP/IMAPS von einander
	zu trennen und unterschiedliche Abfragehäufigkeiten einzuführen.
- Änderung for WorkingDirectory beim Aufruf von z.B. Thunderbird

========================================================================
DONE
========================================================================

Version 0.28 - 2011.04.08
- Bug 752387: Popper doesn't show provider ... -> fixed

Version 0.27 - 2011.04.05
- continue if server does not deliver a message or msg
- Bug 735071: no new mails leads to error (Fix: Folderstatus 'OK'? Folderdata not None?)
- remove desktop display on headline click in message menu
- context menu on right-click in desktop display with internal (clear, exit, list, check)
  or user commands (same as configured by user for message menu)
- replace newline ('\n') by space (' ') in subjects and real_sender
- internal command 'clear' destroys desktop display
- another correction of degenerated email headers ( ?==? to ?= =? )
- changed default charset for decoding to 'latin-1' instead of 'utf-8'
- set user_path/user_folder to os.path.expanduser(...
- re-added missing popper_message.glade

Version 0.26 - 2011.02.28
- multiple accounts
- correct degenerated email headers
- delete obsolete entries in Keyring when Configurator is closed
- desktop display
- don't show removed emails again when 'remove_single_email' clicked
- accept email header keys (From, Date, Subject) also in lower case
- format_header for Subject rewritten (to solve the ä-Problem)
- bubble, sound, speach are now independent from each other

Version 0.25 - 2011.01.24
- improved update of old config files
- indirect addressing in Configurator
- Bug 694814: UTC time error fixed
- speaks notification text
- removed plausibility check of empty fields in first account row
- fixed error with "print %" in CR-ed line (popper.py line 155 und weitere)
- implemented "remove single email from indicator when clicked" in Configurator
- subprocess management to avoid zombies
- Popper and Popper_Config always started as background processes in shell scripts
- Popper_Config can be closed without doing anything (button: Cancel)
- Translations updated and corrected
- Wrote explanation about mandatory settings in help files
- Help files updated for all changes in this version
- fixed race condition: wrong sort order at first start
- avoid unnecessary keyring-outputs in logfile
- Bug 693546: Items stored and retrieved in the keyring are vague and can conflict
- Keyring migration from 0.24 - Keyring entries < 0.24 will be deleted
- Help file updated and corrected

Version 0.24 - 2010.12.21
- removed version migration code
- corrected line breaks in print strings (avoid unwanted spaces/tabs)
- translated keyring_message_dialog
- check for Internet connection in python.sh before launch popper
- try:except: reviewed
- checked time-delta calculation -> found no errors
- get rid of grey bubble in indicator menu -> check evolution.desktop -> does not work
- implement gnomekeyring: get_default_keyring_sync() to avoid problem with non existing 'login' keyring
- get rid of some try:except and own exception-prints in Keyring-Class
- long subject text not shown in notification bubble -> found no errors
- created class Mails and moved related functions in this class
- undone "if not firstcheck" in is_online()
- user_scripts implemented: on_email_clicked, on_account_clicked
- fix infos in Software Center -> don't know how, at least removed description from heading
- import existing email accounts from Keyring
- striped IMAP folder list (to eliminate imaplib.errors)

Version 0.23 - 2010.11.21
- removed old obfuscation error trapping
- code cleaned-up according PEP
- implement keyring (again)
- improved versioning
- migration from 0.22 to 0.23 config settings when started the first time
- created new tab in configurator for 'user scripts'
- 'scripts' coded in popper.py and popper_config.py
- filter implemented
- sort order fixed (caused by keyring-password-dialog)
- dialog for keyring messages

Version 0.22 - 2010.10.29
- subject_length not respected when 'show_sender = off'
- age of emails in counter spot
- replaced old obfuscation method
- info message to re-enter password(s)

Version 0.21 - 2010.10.13
- change rights on usr/share/popper and *.sh files to enable multiuser
- prevent duplicated Gmail emails caused by labels
- internationalization (supports german and english for all other languages)

Version 0.20 - 2010.09.29
- remove try from reminder.load() in popper.py after 0.19 -> no
- removed try for 'show_only_new' in configurator after 0.19
- show Sender and Subject in notification when one new email comes in
- fix problem with 'de_CH', 'nsd_DE'
- clean-up configurator (tab: indicator)
- for IMAP use non_SSL if SSL does not work
- handle passwords as unicode -> no, works as designed even with strange chars
- IMAP.error -> is not caused by wrong folder parsing
- keep List filled after clear() when "show only new email" is set

Version 0.19 - 2010.09.21
- fixed bug in mail_count for IMAP accounts
- implemented 'show_only_new'

Version 0.18 - 2010.09.12
- subject text in summary window is not cut anymore
- take current time if time from email cannot be retrieved
- enhanced sound file (fades out)
- normalized datetime to enable sorting in summary window
- default sort order in summary window is: by date desc
- added lots of debug code to get_mail()
- prevent showing summary window with mails when it should be empty after click on Heading or Clear
- notification sequence changed to: Envelope -> Sound -> OSD
- how to sort a multi-array: sorted(rows, key=lambda rows: rows[3])
- fixed: envelope not set to white when Headline clicked
- enabled multiuser: popper.cfg and popper.dat in /home/user/.popper/
- providers in configurator can be switched on/off
- removed 'number_of_entries' from configurator
- reset envelope to white if all summaries are (0)

Version 0.17 - 2010.09.06
- summary list: columns resizable, window auto-resizes
- internal command 'list' to open a summary window for all providers
- different sort behaviour when popper.py is restarted after configurator
- summary number should only count unseen emails? No, should reflect inbox.

Version 0.16 - 2010.08.24
- write/delete popper.py's pid to file 'popper.pid'
- remove restart warning in popper_config
- hided 'max email entries' from configurator
- popper.dat not deleted after config changes anymore
- removed try/except for new fields in configurator
- process internal commands: clear, exit, check
- implement 'summarize by provider'
- configurator will restart popper.py on exit
- Konfigurator renamed to Configurator in popper_config.desktop
- debug code to find the strange value in 'response' from Gmail
- Show list of emails for summary accounts in separate dialog

Version 0.15 - 2010.08.18
- menu entries are not saved in popper.dat
- removed 'clear entries' because clearing does not work
- menu entry names and commands are configurable
- sort order (date, provider) added to configurator
- log file messages are indented to improve readability
- debug code is marked with #debug
- message append logic refactored
- clear indicator list on every check to avoid sort problems
- if POP3_SSL does not work POP3 is used
- 3 custom menu entries
- plausibility check for menu entries on exit
- fixed problem with 'not more than 7 messages in indicator menu'

Version 0.14 - 2010.08.11
- solved 'empty log' problem by: sys.stdout.flush
- path to soundfile in configurator and popper.py
- table of contents for help files
- file chooser for soundfile in configurator
- play soundfile in configurator
- menu entries as messages (experimental)
- replaced mplayer by aplay
- sort problem fixed by reversing message list (seems to be an error in the indicator menu)
- help adapted: soundfile, menu entries, SSL

Version 0.13 - 2010.08.04
- replaced ALL by UNSEEN for IMAP accounts
- trapped 'no subject' error (KeyError in dmail['Subject'])
- play sound on new emails
- remove/add standard indicator entries -> no, only info in help
- menu entries for: Clear, WriteEmail, ShowAddressBook -> does not work, disabled in Configurator
- help updated for: play sound, remove/add standard indicator entries
- build DEB

Version 0.12 - 2010.07.17
- code reviewed
- swap header_field_formating to a separate function
- always save popper.desktop when configurator is closed (to avoid async)
- 'clear on click' is 'on' as default
- put POP/IMAP selection in configurator
- check inconsistence of IMAP chkbox and server: not implemented
- show reboot info when popper_config terminates
- help updated
- bubble/window radiobox removed
- switched GUI position of sender-subject / subject-sender
- email body text removed
- made MailServer a class
- show full subject text in bubble
- created Mail class

Version 0.11 - 2010.07.13
- code reviewed
- fixed sort problem
- fixed problem with unsaved headline in popper.desktop, reason was a
  different default entry in popper.desktop and popper.cfg
- IMAP support
- show bodytext in bubble causes decode error: trapped error, don't show body
- config GUI redesigned for IMAP support
- show folder list from IMAP server in test output
- http://www.doughellmann.com/PyMOTW/imaplib/
- read IMAP Header, Body, Flags
- support IMAP folders
- update Help
- update Minihelp in Configurator

Version 0.10 - 2010.07.06
- Help in Configurator (english and german)
- Show Provider as prefix to message
- Headline instead of Provider
- check internet connection until we have one, then get pop connection
- fixed error in popper.sh for writing to popper.log
- support for SSL (Gmail)
- notify format implemented in Configurator (bubble/window)
- open help file depending on local language (english for unknown)
- handle failed provider access after second try
- popper_icon.png created
- improved error handling in get_mail()
- decode sender_real (Umlaute etc.)
- delete popper.dat when config is changed to avoid
  that saved messages compromise changed settings

Version 0.09 - 2010.06.29
- improved password obfuscation
- use id to compare mails (id = user + UIDL)
- remember last session (store messages)
- support multiple email accounts
- check multi account field consistency in popper_config
- strip all multi account fields
- option 'clear indication after click'
- fill list from top and hide bottom entries if above limit
- change test in popper_config for multi accounts

Version 0.08 - 2010.06.24
- check if autostart file exists before it is deleted
- create .config/autostart folder if it does not exist
- remove keyring and initial sleep(20)
- create popper_config.sh
- keep mails in panel even if Provider is clicked
- rewrote email parser
- show part of email.payload

Version 0.07 - 2010.06.22
- changed pop3.retr to pop3.top in order to get just the header and to keep them unread on the mail server
- if connection fails, try again after 30 seconds before popper.py is terminated
- all config settings applied (except autostart)
- implemented create/delete of autostart entry

Version 0.06 - 2010.06.21
- convert header tags to lowercase in order to fetch independent of case
- do not un-green envelope when all messages are clicked
- add notify_text_one/multi to popper_config.py
- cleaned up settings in popper_config.py
- apllied settings in popper.py
- fixed "name = gtk.Buildable.get_name(widget)"
- don't forget to check 'danach' for Signal in Glade to avoid "GtkEntry - did not receive focus-out-event"

Version 0.05 - 2010.06.20
- Notification implemented
- Message list cleaned up (remove read mails from indicator list)
- 'Click on item' fixed
- Click logic for indicator entries: Header -> open Evolution, Message -> show details
- implemented keyring for popper and popper_settings

Version 0.04 - 2010.06.02
- use same names in popper for subject, sender, etc.
- modify popper.desktop (example: Name=GMX)
- trim subject and sender string
- fixed subject encoding problem (bytecode is not accepted by indicator)

Version 0.03 - 2010.05.28
- Sender format in popper_config
- Algorithm to extract sender name and address from 'From:'
- Plausibility checks in popper_config

Version 0.02 - 2010.05.26
- Popper_Settings implemented with Glade
- Testing of email connectivity in popper_config
- Indicator implemented

Version 0.01 - 2010.05.21
- analysis of how to use notification in Lucid:
	http://roscidus.com/desktop/node/336
- analysis of how to use the indicator in Lucid:
	http://gnomejournal.org/article/67/an-introduction-to-the-message-indicator
	https://wiki.ubuntu.com/MessagingMenu/
	http://www.jonobacon.org/2010/01/14/application-indicators-rocking-the-house/
- project name: Popper, A new email indicator and notifier for POP3 accounts
- Reading/Writing of configuration file
- Try to get the emails from an POP3 account
